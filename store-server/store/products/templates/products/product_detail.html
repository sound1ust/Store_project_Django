{% extends 'products/base.html' %}
{% load static %}
{% load humanize %}

{% block  css %}
<link href="{% static 'vendor/css/product-detail.css' %}" rel="stylesheet">
{% endblock %}

{% block  content %}

<div class="d-flex" id="main-container">
    <div id="carouselExampleSlidesOnly" class="carousel slide" data-interval="false">
        <div class="carousel-inner" role="listbox">
            {% for product_image in product.images.all %}
                <div class="carousel-item {% if forloop.first %} active {% endif %}">
                    <img src="{{product_image.image.url}}">
                </div>
            {% endfor %}
            <a class="carousel-control-prev pr-5" href="#carouselExampleSlidesOnly" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next pl-5" href="#carouselExampleSlidesOnly" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <div class="small-images d-flex" id="small-images">
            {% for product_image in product.images.all %}
                <img src="{{product_image.image.url}}" data-target="#carouselExampleSlidesOnly" data-slide-to="{{forloop.counter0}}">
            {% endfor %}
        </div>
    </div>
    <div class="product-description">
            <!-- Product Info -->
    <div class="col-lg-12" id="content">
        <h1>{{ product.name }}</h1>
        <p class="lead my-4">{{ product.price }} BYN</p>

        <!-- Product Description -->
        <p class="text-muted">
            {{ product.description }}
        </p>

        <!-- Product Attributes -->
        {% if product.colors.all %}
        <div class="row my-4">
            <div class="col-sm-4">
                <label>Цвет:</label>
                <select class="form-control">
                    {% for color in product.colors.all %}
                    <option>{{ color }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        {% endif %}

        <!-- Add to Cart Button -->
        <a class="btn btn-primary btn-lg"
           href="{% url 'products:basket_add' product.id %}">
            Добавить в корзину</a>
    </div>
</div>
    </div>
</div>

<script>
    const smallImages = document.querySelectorAll('#small-images img');
    smallImages.forEach(img => {
        img.addEventListener('click', () => {
            smallImages.forEach(img => img.classList.remove('active'));
            img.classList.add('active');
        });
    });
</script>

{% endblock %}
